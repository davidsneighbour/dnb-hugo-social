{{- $config := site.Data.dnb.social.twitter -}}
{{- $page := false -}}
{{- if .IsPage -}}
  {{- $page = true -}}
{{- end -}}
{{- if isset $config "profile" -}}
<meta name="twitter:site" content="@{{- $config.profile -}}" />
<meta name="twitter:title" content="{{- .Title -}}" />
{{ with site.Author.twitter -}}
  <meta name="twitter:creator" content="@{{- . -}}"/>
{{ end -}}
{{- with $config.domain -}}
  <meta name="twitter:domain" content="{{- . -}}" />
{{ end -}}
  <meta name="twitter:description" content="
    {{- with .Description -}}
      {{- . -}}
    {{- else -}}
      {{- if $page -}}
        {{- .Summary -}}
      {{- else -}}
        {{- with .Site.Params.description -}}
          {{- . -}}
        {{- end -}}
      {{- end -}}
    {{- end -}}
  "/>
  <!-- check if image available is large enough                                                                      -->
  {{- $card := "summary_large_image" -}}
{{/*  {{- if eq $card "something" -}}*/}}
{{/*    {{- $card = "summary" -}}*/}}
{{/*  {{- end -}}*/}}
  <meta name="twitter:card" content="{{- $card -}}" />
  <!-- create images for twitter cards                                                                               -->
  {{/*<meta name="twitter:image:src" content="{{ .Params.og_image }}"/>*/}}
  {{ $resize := "876x438" }}
  {{- with $.Params.images -}}
    <meta name="twitter:image" content="{{ index . 0 | absURL }}"/>
  {{ else -}}
    {{- $images := $.Resources.ByType "image" -}}
    {{- $featured := $images.GetMatch "*feature*" -}}
    {{- if not $featured }}{{ $featured = $images.GetMatch "{*cover*,*thumbnail*}" }}{{ end -}}
      {{- with $featured -}}
        <meta name="twitter:image" content="{{ $featured.Permalink }}"/>
      {{- else -}}
      {{- with $.Site.Params.images -}}
        <meta name="twitter:image" content="{{ index . 0 | absURL }}"/>
      {{- end -}}
    {{- end -}}
  {{- end }}
{{- else -}}
  {{ warnf "There is no Twitter profile defined. You need to add a data/dnb/social/twitter.toml configuration!" . }}
{{- end -}}
